## 1. 기능 구현

### 기능 구현 준비

구현할 기능
- Todo 추가/체크/삭제/검색 기능

![](https://velog.velcdn.com/images/junnkyuu/post/96fed615-6aa9-402f-9d53-822219f07d24/image.png)


위 기능을 구현하기 위해서는 todoItem들의 데이터를 State로 만들어서 보관해야 한다. 왜냐하면 새로운 데이터가 추가/수정/삭제되었을 때 화면에 변화를 반영할 수 있기 때문이다. State는 모든 자식 component에 전달해야하므로 조상 component인 app component에 만들어야 한다.

테스트 데이터로 각각의 아이템을 구별하는 id, 체크박스 유무를 나타내는 isDone, todo 컨텐츠를 보관할 content, 아이템이 언제 생성되었는 지를 알려주는 date 3가지 데이터를 mockData로 만든다. 그리고 useState를 mockData로 초기화 시켜준다.

<br>

### TodoList - Create(투두 추가하기)

#### 추가하기 기능

![](https://velog.velcdn.com/images/junnkyuu/post/b8f1b1f2-3261-4be8-9bef-b21054a3f974/image.png)

추가버튼을 누르면 원하는 컨텐츠를 추가하는 기능을 하기 위해, onCreate 함수를 만들어준다. onCreate 함수는 content를 매개변수로 받아서 newTodo라는 객체의 content 값에 넣어준다. 

todos의 값은 setTodos로 바꿔줘야하기 때문에 onCreate 함수 마지막에 setTodos 함수 안에 생성한 newTodo와 스프레드 연산자로 ...todos를 넣어주면 된다.

**_주의해야할 점은 todos.push(newTodo)이런 식으로는 절대 하면 안된다. 왜냐하면 todos라는 것은 상태여서 반드시 상태함수 setTodos로 값을 변경해야 리렌더링 되기 때문이다_.**

다음은 버튼을 클릭했을 때 생성한 onCreate 함수를 Editor 컴포넌트에 인수로 전달해준다.

![](https://velog.velcdn.com/images/junnkyuu/post/1fd590b4-1f0e-4904-96ba-acefe45eda62/image.png)

입력받은 input 태그의 값을 저장할 State인 content와 입력값을 감지할 onChangeContent도 만들어준다. onSubmit를 만들어 onCreate 함수를 부르고 매개변수로 content를 전달한다. 버튼의 onClick 이벤트가 발생하면 onSubmit을 불러준다. 

![](https://velog.velcdn.com/images/junnkyuu/post/c475860a-e55d-4f10-a5da-9658863298c4/image.png)


추가 버튼을 클릭하면 위와 같이 앞에 객체가 추가된 것을 볼 수 있다.

![](https://velog.velcdn.com/images/junnkyuu/post/8998622a-c981-4865-bad7-95ad122fb70f/image.png)

그리고 id값은 주민등록번호처럼 고유해야하는데, 지금은 0으로 동일하다. useRef를 이용해서 idRef를 만들어준다. 

![](https://velog.velcdn.com/images/junnkyuu/post/e105d918-2fe9-4305-9746-aec91abfabe5/image.png)

id의 값을 받아올 때 현재값 +1로 지정해주면 다음과 같이 id값을 저장할 수 있다.

#### 비었을 때 추가하지 않는 기능 + 포커스 기능

![](https://velog.velcdn.com/images/junnkyuu/post/d71dea7d-f3e8-4eec-a26c-cb8a01449944/image.png) 


onSubmit 함수 안에서 content값이 비어있으면 return 하게 해주면 된다.

![](https://velog.velcdn.com/images/junnkyuu/post/6e2784cf-1237-40b2-bc4a-4e00e1aa35f7/image.png)

contentRef를 하나 만들어주고, input 태그안에 ref로 지정해준다. 그리고 content가 비어있을 때 contentRef.current.focus()를 지정해주면 값이 비어있을 때 포커스해준다.


#### 추가되면 입력창을 비워주는 기능

![](https://velog.velcdn.com/images/junnkyuu/post/4f614e64-920f-4861-9b4 1-b89abe451957/image.png)
 
간단하게 추가되면 setContent("")를 추가해서 content값을 빈 문자열로 바꿔주면 된다.

#### 엔터키를 눌렀을 때 추가되는 기능

![](https://velog.velcdn.com/images/junnkyuu/post/0471f72d-4090-4401-b12e-ead2cc75cff3/image.png)

onKeyDown이라는 이벤트 핸들러를 만들어주고, input 태그의 사용자가 키보드를 입력했을 때 발생하는 이벤트를 담당하는 onKeyDown에 연결해주면 된다. 우리가 작성한 onKeyDown 함수 안에서는 사용자가 엔터키를 눌렀을 때 입력이 되야하므로 조건문안에 e.keyCode == 13일 때 onSubmit()을 호출해주면 된다.

<br>

### todo-list 렌더링

![](https://velog.velcdn.com/images/junnkyuu/post/41688ef3-6d2c-4176-bb2c-9437e4353950/image.png)

![](https://velog.velcdn.com/images/junnkyuu/post/9818ba6b-6a83-4e27-9b37-d3e28e2a0e36/image.png)

todos를 List component의 props로 전달하고, List component에서 받아온 todos를 map함수를 사용해서 content를 출력해준다.

![](https://velog.velcdn.com/images/junnkyuu/post/da9781ed-c815-4d01-b48f-b209466650e0/image.png)

위와 같이 저장된 todos의 content가 출력된다. 

![](https://velog.velcdn.com/images/junnkyuu/post/662c97dd-2b26-43c0-b927-a08a5a4f50e5/image.png)

미리 만들어놓은 TodoItem component를 사용해서 저장된 todos의 데이터를 가져오려면, props로 ...todos를 전달한 후 TodoItem에서 받아서 사용하면 된다.

![](https://velog.velcdn.com/images/junnkyuu/post/7624e8e8-fdbb-4d3e-9939-67595707c992/image.png)

다음과 같이 출력된다. 

![](https://velog.velcdn.com/images/junnkyuu/post/90345041-b3f8-4a08-a255-770f521032ed/image.png)

콘솔창을 열어보면 다음과 같은 오류가 발생하는데, 이는 각각을 구분할 수 있는 key를 지정하지 않아서 그렇다. 

![](https://velog.velcdn.com/images/junnkyuu/post/37b97ce0-0185-4f2e-b74e-44599e2c138e/image.png)


해결하려면 key값으로 todo.id값도 넘겨주면 된다.

<br>

### 검색 기능

![](https://velog.velcdn.com/images/junnkyuu/post/aadf66ff-ebd7-4568-bd9e-deabf86dc56d/image.png)

검색을 하면 리렌더링 되어야 하므로 검색도 state로 저장해야한다. 그리고 입력값을 받을 때마다 리렌더링 되어야하므로 onChangeSearch 함수를 작성해준다. 

![](https://velog.velcdn.com/images/junnkyuu/post/b8eab39c-39dc-4f7b-b0c9-27e33b263305/image.png)


그리고 받은 검색을 찾을 getFilteredData 함수를 작성해준다. 함수는 받아온 search값을 todos에 있으면 반환해주는 역할을 한다.

![](https://velog.velcdn.com/images/junnkyuu/post/5ff4454e-fa88-450e-bf06-28826398fe01/image.png)

toLowerCase로 모두 소문자로 변환해서 필터링해주면 다음과 같이 검색 기능을 구현할 수 있다. 

<br>

### TodoList - Update(투두 수정하기)

![](https://velog.velcdn.com/images/junnkyuu/post/0c4cc852-7c49-4dda-a70f-228eb38aa8fc/image.png)

App.jsx에서 onUpdate 함수를 작성해서 todos State의 값들 중에 targetId와 일치하는 id를 갖는 todo item의 isDone을 바꿔주면 된다. 

![](https://velog.velcdn.com/images/junnkyuu/post/44259a71-1ccd-4c49-9a2f-73927cfad32e/image.png)

List에 onUpdate를 전달해주고, 그것을 또 TodoItem으로 onUpdate를 전달해준다. TodoItem에서 onChangeCheckBox 함수를 만들어줘서 받은 onUpdate함수를 불러주면, 체크박스를 클릭할 때마다 isDone값이 바뀐다.

<br>

### TodoList - Delete(투두 삭제하기)

![](https://velog.velcdn.com/images/junnkyuu/post/b222cf38-f39b-4eb5-8eb3-1c1a6440b6ce/image.png)

onDelete함수를 App.jsx에서 만들어서 todo 배열에서 targetId와 같은 id를 가진 todo만 삭제해서 새로 만들어서 반환해주면 된다. 

![](https://velog.velcdn.com/images/junnkyuu/post/f2958e1a-fe37-4e5d-bf48-88a1127fe309/image.png)

onDelete 함수를 props로 List, TodoItem까지 전달한다. 그리고 TodoItem에서 onClickDeleteButton를 만들어서 onDelete를 불러주고, button에 onClick이벤트로 달아주면 된다.

---
<br>

## useReducer

- useReducer는 React의 내장 훅 중 하나로, useState의 대체 함수이다
- useReducer는 state 업데이트 로직을 컴포넌트 외부로 분리할 수 있어, 복잡한 상태 관리에 유용하다.
- useReducer의 파라미터로는 reducer 함수와 초기 state가 필요하며, reducer 함수는 state와 action을 받아 다음 state를 반환한다.
- useReducer를 사용하면 컴포넌트 내부에서 state 업데이트 로직을 관리하지 않고, 외부의 reducer 함수에서 관리할 수 있다.

<br>

## React Context 

- React의 Context API를 사용하면 컴포넌트 트리 전체에 데이터를 제공할 수 있다.
- Context를 사용하면 props를 일일이 전달하지 않고도 컴포넌트 간에 데이터를 공유할 수 있다.
- Context는 전역 상태 관리에 유용하며, 컴포넌트 트리 깊이에 관계없이 데이터를 전달할 수 있다.

<br>

## React 성능 최적화
- React 애플리케이션의 성능을 최적화하기 위해서는 프로덕션 빌드를 사용해야 한다. 
- useMemo 훅을 사용하면 CPU 소모가 큰 함수의 결과를 캐싱하여 성능을 향상시킬 수 있다. 
- 프로덕션 빌드 시 React와 React DOM의 프로덕션 준비 버전을 사용하면 성능이 향상된다. 
- 다양한 성능 최적화 기술을 적용하여 React 애플리케이션의 성능을 향상시킬 수 있다. 
- 추가로, React의 상태 관리 측면에서 Redux와 같은 상태 관리 라이브러리도 고려해볼 수 있다. Redux는 복잡한 상태 관리에 유용하며, 상태 변화를 추적하고 디버깅하기 쉽.
- React의 Context API와 함께 사용하면 더욱 강력한 상태 관리 솔루션을 구현할 수 있다.

---
<br>

[사진 및 참고 출처 - 한입 크기로 잘라먹는 리액트](https://www.inflearn.com/course/%ED%95%9C%EC%9E%85-%EB%A6%AC%EC%95%A1%ED%8A%B8)
